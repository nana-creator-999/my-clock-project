<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>他の人の時間</title>
<link rel="stylesheet" href="style2.css">
<style>
table {
  width: 85%;
  margin: 40px auto;
  border-collapse: collapse;
  font-family: "游明朝体", "Yu Mincho", serif;
  background: #f9f9f9;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
}
th, td {
  padding: 12px 16px;
  border-bottom: 1px solid #ddd;
}
th {
  background: #f0f0f0;
  font-weight: 500;
  color: #333;
  text-align: center;
}
td {
  font-size: 1.1em;
  color: #222;
}
tr:last-child td {
  border-bottom: none;
}
#clock {
  text-align: center;
  margin-top: 20px;
  font-size: 1.3em;
  color: #555;
}
footer {
  text-align: center;
  margin: 40px 0;
}
footer a {
  color: #333;
  text-decoration: none;
  border: 1px solid #aaa;
  padding: 8px 18px;
  border-radius: 8px;
  transition: all 0.3s ease;
}
footer a:hover {
  background: #333;
  color: #fff;
}
</style>
</head>
<body>
  <h1>他の人の時間</h1>
  <p class="note">それぞれの「生まれた時間」を0:00とした現在の時間です。</p>

  <table id="table">
    <tr><th>生まれた時間</th><th>現在の時間</th></tr>
  </table>

  <footer>
    <a href="index.html">戻る</a>
  </footer>

<script>
function loadData() {
  const people = JSON.parse(localStorage.getItem("peopleData") || "[]");
  const table = document.getElementById("table");

  // 名前を非表示にする
  people.forEach((p, i) => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${p.time}</td>
      <td id="time-${i}">--:--</td>
    `;
    table.appendChild(row);
  });

  updateAllClocks();
  setInterval(updateAllClocks, 10000);
}

function updateAllClocks() {
  const people = JSON.parse(localStorage.getItem("peopleData") || "[]");
  people.forEach((p, i) => {
    const timeCell = document.getElementById(`time-${i}`);
    if (!timeCell) return;

    const [bh, bm] = p.time.split(":").map(Number);
    const now = new Date();
    const birth = new Date();
    birth.setHours(bh, bm, 0, 0);
    if (now < birth) birth.setDate(birth.getDate() - 1);

    const diffMs = now - birth;
    const diffH = Math.floor(diffMs / (1000 * 60 * 60));
    const diffM = Math.floor((diffMs / (1000 * 60)) % 60);
    const modH = diffH % 24;

    timeCell.textContent = `${String(modH).padStart(2, "0")}:${String(diffM).padStart(2, "0")}`;
  });
}

loadData();
</script>
</body>
</html>
